<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Clinic Appointment | iHealth Staff History</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="" name="description">
    <meta content="Coderthemes" name="author">
   <!-- App favicon -->
   <link rel="shortcut icon" href="../../static/images/brgyms-icon-white.png">

   <!-- third party -->
   <link href="../../static/css/vendor/jquery-jvectormap-1.2.2.css" rel="stylesheet" type="text/css">
   <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
   <!-- third party end -->

   <!-- App css -->
   <link href="../../static/css/icons.min.css" rel="stylesheet" type="text/css">
   <link href="../../static/css/app-i.min.css" rel="stylesheet" type="text/css" id="light-style">
   <link href="../../static/css/app-dark.min.css" rel="stylesheet" type="text/css" id="dark-style">

   <!-- Datatables css -->
    <link href="../../static/css/vendor/select.bootstrap5.css" rel="stylesheet" type="text/css" />
    <link href="../../static/css/vendor/dataTables.bootstrap5.css" rel="stylesheet" type="text/css" />
    <link href="../../static/css/vendor/responsive.bootstrap5.css" rel="stylesheet" type="text/css" />
    

</head>

<body class="loading"
    data-layout-config='{"leftSideBarTheme":"dark","layoutBoxed":false, "leftSidebarCondensed":false, "leftSidebarScrollable":false,"darkMode":false, "showRightSidebarOnStart": true}'>
    <!-- Begin page -->
    <header>

        <div class="wrapper">
            <!-- ========== Left Sidebar Start ========== -->
            <div class="leftside-menu">
    
               <!-- LOGO -->
                <a href="/index" class="logo text-center logo-light">
                <span class="logo-lg">
                    <img src="../../static/images/ihealth-logo-with-text.png" alt="" height="40">
                </span>
                <span class="logo-sm">
                    <img src="../../static/images/bitbo.png" alt="" height="32">
                </span>
                </a>
    
            <!--- Sidemenu -->
            <ul class="side-nav">

                <li class="side-nav-title side-nav-item">Menu</li>

                <li class="side-nav-item">
                    <a href="/indexstaff" class="side-nav-link">
                        <i class="uil-chart-pie"></i>
                        <span> Dashboard </span>
                    </a>
                </li>

                <li class="side-nav-item">
                    <a href="/schedulestaff" class="side-nav-link">
                        <i class="uil-clipboard-alt"></i>
                        <span> Schedule </span>
                    </a>
                </li>

                <li class="side-nav-item">
                    <a href="/vaccinationstaff" class="side-nav-link">
                        <i class="uil-syringe"></i>
                        <span> Vaccination Service</span>
                    </a>
                </li>

                <li class="side-nav-item">
                    <a href="/clinicstaff" class="side-nav-link">

                        <i class="uil-clipboard-alt"></i>
                        <span> Clinic Service </span>
                    </a>
                </li>

                <li class="side-nav-item">
                    <a href="/dentalstaff" class="side-nav-link">
                        <i class="mdi mdi-hospital"></i>
                        <span> Dental Service </span>
                    </a>
                </li>

                <li class="side-nav-item">

                    <a href="/medicinestaff'" class="side-nav-link">
                        <i class="uil-home-alt"></i>
                        <span>Medicine Pick Up</span>
                    </a>
                </li>

                <li class="side-nav-item menuitem-active">
                    <a data-bs-toggle="collapse" href="#sidebarEmail" aria-expanded="false" aria-controls="sidebarEmail" class="side-nav-link">
                        <i class="mdi mdi-history"></i>
                        <span> Appointment History </span>
                        <span class="menu-arrow"></span>
                    </a>
                    <div class="collapse" id="sidebarEmail">
                        <ul class="side-nav-second-level">
                            <li>
                                <a href="/staffhaptvax">Vaccination Service</a>
                            </li>
                            <li class="badge-primary-lighten  menuitem-active">
                                <a href="/staffhaptclinic">Clinic Service</a>
                            </li>
                            <li>
                                <a href="/staffhaptdental">Dental Service</a>
                            </li>
                            <li>
                                <a href="/staffhaptmedicine">Medicine Pickup</a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="side-nav-item  ">
                    <a href="/cancelledbookingsS" class="side-nav-link">
                        <i class="uil-chart-pie"></i>
                        <span> Cancelled Bookings </span>
                    </a>
                </li>
                <li class="side-nav-item">
                    <a href="/noshowbookingsS" class="side-nav-link">
                        <i class="uil-chart-pie"></i>
                        <span> Non-appearance </span>
                    </a>
                </li>
            </ul>
        </div>
    </header>

    <div class="wrapper">

        <div class="content-page">
            <div class="content">
                <!-- Topbar Start -->
                <div class="navbar-custom">
                    <ul class="list-unstyled topbar-menu float-end mb-0">

                        <li class="notification-list">
                            <a class="nav-link" href="{{session.url}}">
                                <i class="noti-icon"><button type="button" class="btn btn-primary">Switch to
                                        <strong>BITBo.</strong></button></i>
                            </a>
                        </li>


                        <li class="dropdown notification-list">
                            <a class="nav-link dropdown-toggle nav-user arrow-none me-0" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                <span class="account-user-avatar">
                                    <img src="../../static/images/users/profile1.png" alt="user-image"
                                        class="rounded-circle">
                                </span>
                                <span>
                                    <span class="account-user-name">{{session.user_firstname}}</span>
                                    <span class="account-position">Staff</span>
                                </span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end dropdown-menu-animated topbar-dropdown-menu profile-dropdown">
                                <!-- item-->
                                <div class=" dropdown-header noti-title">
                                    <h6 class="text-overflow m-0">Welcome !</h6>
                                </div>

                                <!-- item-->
                                <a href="https://prod.brgyit-bot.com/portal/" class="dropdown-item notify-item">
                                    <i class="mdi mdi-logout me-1"></i>
                                    <span>Logout</span>
                                </a>
                            </div>
                        </li>

                    </ul>
                    <button class="button-menu-mobile open-left">
                        <i class="mdi mdi-menu"></i>
                    </button>
                </div>
                <!-- end Topbar -->

                <!-- Start Content-->
                <div class="container-fluid">

                    <!-- start page title -->
                    <div class="row">
                        <div class="col-12">
                            <div class="page-title-box">
                                <h4 class="page-title">Clinic Appointments History</h4>
                            </div>
                        </div>
                        <div class="d-print-none col-sm-12">
                            <div class="text-end">
                                <button class="btn btn-primary mdi mdi-printer" id="save-button" type="button">Download</button>
                            </div>
                        </div>  
                    </div> <br>
                    <!-- end page title -->
                    
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="tab-content">
                                    <div class="table-hover" id="scroll-horizontal-preview">
                                        <table id="basic-datatable" class="table dt-responsive nowrap w-100">
                                            <div class="card print-only">
                                                <thead>
                                                    <tr class="table-light">
                                                        <th>ID</th>
                                                        <th>Service</th>
                                                        <th>Date</th>
                                                        <th>Status</th>
                                                        <th>Resident</th>
                                                        <th>Service Name</th>
                                                        <th>Schedule</th>
                                                        <th id="Action">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for staffhaptclinic in staffhaptclinic %}
                                                    <tr>
                                                        <td>{{ staffhaptclinic.appt_id}}</td>
                                                        <td>{{ staffhaptclinic.appt_type}}</td>
                                                        <td>{{ staffhaptclinic.date}}</td>
                                                        <td>{{ staffhaptclinic.status}}</td>
                                                        <td>{{ staffhaptclinic.firstname}}</td>
                                                        <td>{{ staffhaptclinic.clinic_services_name}}</td>
                                                        <td>{{ staffhaptclinic.schedule_name}}</td>
                                                        <td class="no-print">
                                                            <a href="/updateclinicstaff/{{staffhaptclinic.appt_id}}">
                                                                <button type="button" class="btn btn-outline-info btn-rounded"  data-bs-trigger="hover" title="Edit">
                                                                <i class="mdi mdi-circle-edit-outline"></i>
                                                                </button>
                                                            </a>                  
                                                        </td>
                                                    </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </div>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <!-- end row of table content-->
                        </div>
                        <!-- container -->
                    </div>
                    <!-- content -->

                </div>
            </div>
        </div>
    </div>
    <!-- END wrapper -->

    <!-- ============================================================== -->
    <!-- End Page content -->
    <!-- ============================================================== -->

    <script>
        function saveTableToCSV() {
        // Get the table element by its ID
        const table = document.getElementById("basic-datatable");
        console.log("table", table);

        // Extract the data from the table using Papa Parse
        const data = Papa.parse(table.innerHTML.trim(), {
            header: true,
            dynamicTyping: true,
            skipEmptyLines: true,
        }).data;
        console.log("data", data);

        // Convert the array of objects to a CSV string using Papa Parse
        const csv = Papa.unparse(data);
        console.log("csv", csv);

        // Create a new Blob object with the CSV string
        const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });

        // Create a new URL object and set its href to the Blob object
        const url = URL.createObjectURL(blob);

        // Create a new anchor element and set its href to the URL object
        const a = document.createElement("a");
        a.href = url;

        // Set the anchor element's download attribute and text content
        a.download = "table.csv";
        a.textContent = "Download CSV";

        // Click the anchor element to trigger the download
        a.click();

        // Remove the URL object from memory
        URL.revokeObjectURL(url);
        }

        // Attach the saveTableToCSV function to the click event of the save button
        document.getElementById("save-button").addEventListener("click", saveTableToCSV);
    </script>
 
    <!-- bundle -->
    <script src="../../static/js/vendor.min.js"></script>
    <script src="../../static/js/app.min.js"></script>

    <!-- third party js -->
    <script src="../../static/js/vendor/jquery.dataTables.min.js"></script>
    <script src="../../static/js/vendor/dataTables.bootstrap5.js"></script>
    <script src="../../static/js/vendor/dataTables.responsive.min.js"></script>
    <script src="../../static/js/vendor/responsive.bootstrap5.min.js"></script>
    <script src="../../static/js/vendor/dataTables.buttons.min.js"></script>
    <script src="../../static/js/vendor/buttons.bootstrap5.min.js"></script>
    <script src="../../static/js/vendor/buttons.php5.min.js"></script>
    <script src="../../static/js/vendor/buttons.flash.min.js"></script>
    <script src="../../static/js/vendor/buttons.html5.min.js"></script>
    <script src="../../static/js/vendor/buttons.print.min.js"></script>
    <script src="../../static/js/vendor/dataTables.keyTable.min.js"></script>
    <script src="../../static/js/vendor/dataTables.select.min.js"></script>
    <script src="../../static/js/vendor/apexcharts.min.js"></script>
    <script src="../../static/js/vendor/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="../../static/js/vendor/jquery-jvectormap-world-mill-en.js"></script>
    <script src="../../static/js/vendor/dropzone.min.js"></script>
    <script src="../../static/js/vendor/list.min.js"></script>
    <!-- third party js ends -->

    <!-- demo app -->
    <script src="../../static/js/pages/demo.datatable-init.js"></script>
    <script src="../../static/js/pages/demo.toastr.js"></script>
    <script src="../../static/js/pages/demo.datatable-init.js"></script>
    <script src="../../static/js/pages/demo.toastr.js"></script>
    <script src="../../static/js/pages/list.js"></script>



    <!-- Datatable Init js -->
    <script src="assets/js/pages/demo.datatable-init.js"></script>

</body>

</html>